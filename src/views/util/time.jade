mixin time(date)
  - date = new Date(date)
  - var monthList = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
  - var seconds = Math.floor(( new Date()*1 - date*1 ) / 1000)
  - var minutes = Math.floor(seconds / 60)
  - var hours = Math.floor(minutes / 60)
  - var days = Math.floor(hours / 24)
  - var month = monthList[date.getMonth()]
  - var year = date.getFullYear()
  - var date = date.getDate()
  
  if days > 7
    span at #{date} #{month} #{year}
  else if days >= 1
    span #{__n('%d day ago', '%d days ago', days)}
  else if hours >= 1
    span #{__n('%d hour ago', '%d hours ago', hours)}
  else if minutes >= 1
    span #{__n('%d minute ago', '%d minutes ago', minutes)}
  else
    span #{__('Just now')}
